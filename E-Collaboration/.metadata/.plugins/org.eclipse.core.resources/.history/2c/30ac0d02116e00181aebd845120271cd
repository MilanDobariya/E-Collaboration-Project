/**
 * 
 */
app.controller('JobCtrl',function($scope,JobService,$location,$rootScope){
	$scope.addJob=function(job){
		JobService.addJob(job).then(
				function(response){
					alert('Job details inserted successfully')
					$location.path('/home')
				},function(response){
					//3 return statement for error in middleware
					$scope.error=response.data
					if($scope.error.errorCode==7)//not logged in
						$location.path('/login')
				})
	}
	function getActiveJobs(){
		JobService.getActiveJobs().then(function(response){
			//response.data is Array of Active jobs[{...active=true},{...,active=true}] for success
			$scope.activeJobs=response.data
		},function(response){
			//response.data is ErrorClazz object
			$scope.error=response.data
			if(response.status==401)
			$location.path('/login')
		})
	}
	function getInActiveJobs(){
		JobService.getInActiveJobs().then(function(response){
			//response.data is array of inactive jobs
			$scope.inActiveJobs=response.data
			},function(response){
				$scope.error=response.data
				if(response.data.errorCode==7)
					$location.path('/login')
		})
	}
	
	
	$scope.showJobDetails=function(id){
		$scope.id=id//for this job id has to show more details
		$scope.isClicked=true
	}
	getActiveJobs()//function call
	if($rootScope.loggedInUser.role=='ADMIN')
		getInActiveJobs()
})