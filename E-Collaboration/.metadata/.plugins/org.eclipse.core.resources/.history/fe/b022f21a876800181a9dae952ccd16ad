/**
 * 
 */
var app=angular.module("app",['ngRoute'])
app.config(function($routeProvider){
	$routeProvider
	.when('/registration',{
		controller:'UserCtrl',
		templateUrl:'views/registrationform.html'
	
	})
	.when('/home',{
		templateUrl:'views/home.html'
	})
	.when('/login',{
		controller:'UserCtrl',
		templateUrl:'views/login.html'
	})
	.otherwise({templateUrl:'views/home.html'
	
	})
	
	app.run(function($rootScope,$cookieStore,UserService){
		if($rootScope.loggedInUser==undefined)
			$rootScope.loggedInUser=$cookieStore.get('loggedInUser')
	
			$rootScope.logout=function(){
			UserService.logout().then(function(response){
			$rootScope.message="Loggedout successfully..."
				delete $rootScope.loggedInUser
				$cookieStore.remove('loggedInUser')
				$location.path('/login')
			},function(response){
				$rootScope.error=response.data// ErrorClazz object returned from middleware
				$location.path('/login')
			
			})
			}
	
	})
})